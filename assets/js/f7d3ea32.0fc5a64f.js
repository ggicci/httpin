"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[520],{1787:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>a,contentTitle:()=>l,default:()=>g,frontMatter:()=>o,metadata:()=>u,toc:()=>c});var i=n(5893),s=n(1151),r=n(2332);const o={sidebar_position:4},l="go-restful",u={id:"integrations/go-restful",title:"go-restful",description:"go-restful is a",source:"@site/docs/integrations/go-restful.mdx",sourceDirName:"integrations",slug:"/integrations/go-restful",permalink:"/httpin/integrations/go-restful",draft:!1,unlisted:!1,editUrl:"https://github.com/ggicci/httpin/edit/documentation/docs/docs/integrations/go-restful.mdx",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"docsSidebar",previous:{title:"gin-gonic/gin \ud83e\udd64",permalink:"/httpin/integrations/gin"},next:{title:"Concepts",permalink:"/httpin/advanced/concepts"}},a={},c=[{value:"Integrations",id:"integrations",level:2},{value:"Run Demo",id:"run-demo",level:2}];function d(e){const t={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",strong:"strong",...(0,s.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.h1,{id:"go-restful",children:"go-restful"}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.a,{href:"https://github.com/emicklei/go-restful",children:(0,i.jsx)(t.strong,{children:"go-restful"})})," is a"]}),"\n",(0,i.jsxs)(t.blockquote,{children:["\n",(0,i.jsx)(t.p,{children:"package for building REST-style Web Services using Go."}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"integrations",children:"Integrations"}),"\n",(0,i.jsxs)(t.p,{children:["Convert ",(0,i.jsx)(t.code,{children:"httpin.NewInput"})," middleware handler to ",(0,i.jsx)(t.code,{children:"restful.Filter"}),"."]}),"\n",(0,i.jsxs)(t.p,{children:["Use ",(0,i.jsx)(t.a,{href:"https://pkg.go.dev/github.com/emicklei/go-restful/v3#HttpMiddlewareHandlerToFilter",children:"HttpMiddlewareHandlerToFilter"}),", which is introduced in ",(0,i.jsx)(t.a,{href:"https://github.com/emicklei/go-restful/tree/v3.9.0",children:"v3.9.0"})," by this ",(0,i.jsx)(t.a,{href:"https://github.com/emicklei/go-restful/pull/505",children:"PR#505"}),"."]}),"\n",(0,i.jsx)(t.h2,{id:"run-demo",children:"Run Demo"}),"\n",(0,i.jsx)(r.Z,{children:(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-go",metastring:"{20,32}",children:'package main\n\nimport (\n\t"fmt"\n\t"net/http"\n\t"net/http/httptest"\n\n\trestful "github.com/emicklei/go-restful/v3"\n\t"github.com/ggicci/httpin"\n)\n\ntype ListUsersInput struct {\n\tGender   string `in:"query=gender"`\n\tAgeRange []int  `in:"query=age_range"`\n\tIsMember bool   `in:"query=is_member"`\n}\n\nfunc handleListUsers(request *restful.Request, response *restful.Response) {\n\t// Retrieve you data in one line of code!\n\tinput := request.Request.Context().Value(httpin.Input).(*ListUsersInput)\n\n\tfmt.Printf("input: %#v\\n", input)\n}\n\nfunc main() {\n\tws := new(restful.WebService)\n\n\twsContainer := restful.NewContainer()\n\twsContainer.Add(ws)\n\n\t// Bind input struct with handler.\n\tws.Route(ws.GET("/users").Filter(\n\t\trestful.HttpMiddlewareHandlerToFilter(httpin.NewInput(ListUsersInput{})),\n\t).To(handleListUsers))\n\n\tr, _ := http.NewRequest("GET", "/users?gender=male&age_range=18&age_range=24&is_member=1", nil)\n\n\trw := httptest.NewRecorder()\n\twsContainer.ServeHTTP(rw, r)\n}\n'})})})]})}function g(e={}){const{wrapper:t}={...(0,s.a)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}}}]);
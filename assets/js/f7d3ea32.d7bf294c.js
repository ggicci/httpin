"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[520],{3152:function(e,t,n){n.d(t,{Z:function(){return m}});var r=n(4035),i=n(1720),s=n.n(i),o=n(9812),a=n(5670),u=n(7294),l="toolbar_uIxz",p="button_yMrS",c="hidden_X41c",d="https://goplay.ggicci.me",g=function(e){var t=e.children,n=e.onClick;return u.createElement("button",{className:p,onClick:n},t)},m=function(e){var t=e.children,n=u.useRef(null),i=u.useRef(null),p=t&&t.props&&"pre"===t.props.mdxType&&t,m=p&&p.props&&p.props.children;if(!m||"code"!==m.props.mdxType)return u.createElement("div",null,"GoPlay: the wrapped data is not a codeblock.");if(!/\blanguage-go\b/.test(m&&m.props.className))return u.createElement("div",null,"GoPlay: only go code supported.");function f(){return(f=(0,r.Z)(s().mark((function e(){var t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new o.h(d),e.next=3,t.share(m.props.children.trim());case 3:n=e.sent,window.open(n,"_blank");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return u.createElement(u.Fragment,null,t,u.createElement("div",{ref:n,className:c},u.createElement(a.Z,{language:"text"},u.createElement("div",{ref:i}))),u.createElement("div",{className:l},u.createElement(g,{onClick:function(){if(i.current){var e=new o.h(d);n.current.classList.remove(c),e.renderCompile(i.current,m.props.children.trim())}}},"Run"),u.createElement(g,{onClick:function(){return f.apply(this,arguments)}},"Try it yourself \u21e2")))}},1893:function(e,t,n){n.r(t),n.d(t,{assets:function(){return c},contentTitle:function(){return l},default:function(){return m},frontMatter:function(){return u},metadata:function(){return p},toc:function(){return d}});var r=n(3117),i=n(102),s=(n(7294),n(3905)),o=n(3152),a=["components"],u={sidebar_position:4},l="go-restful",p={unversionedId:"integrations/go-restful",id:"integrations/go-restful",title:"go-restful",description:"go-restful is a",source:"@site/docs/integrations/go-restful.mdx",sourceDirName:"integrations",slug:"/integrations/go-restful",permalink:"/httpin/integrations/go-restful",draft:!1,editUrl:"https://github.com/ggicci/httpin/edit/documentation/docs/docs/integrations/go-restful.mdx",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"docsSidebar",previous:{title:"gin-gonic/gin \ud83e\udd64",permalink:"/httpin/integrations/gin"},next:{title:"Concepts",permalink:"/httpin/advanced/concepts"}},c={},d=[{value:"Integrations",id:"integrations",level:2},{value:"Run Demo",id:"run-demo",level:2}],g={toc:d};function m(e){var t=e.components,n=(0,i.Z)(e,a);return(0,s.kt)("wrapper",(0,r.Z)({},g,n,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("h1",{id:"go-restful"},"go-restful"),(0,s.kt)("p",null,(0,s.kt)("a",{parentName:"p",href:"https://github.com/emicklei/go-restful"},(0,s.kt)("strong",{parentName:"a"},"go-restful"))," is a"),(0,s.kt)("blockquote",null,(0,s.kt)("p",{parentName:"blockquote"},"package for building REST-style Web Services using Go.")),(0,s.kt)("h2",{id:"integrations"},"Integrations"),(0,s.kt)("p",null,"Convert ",(0,s.kt)("inlineCode",{parentName:"p"},"httpin.NewInput")," middleware handler to ",(0,s.kt)("inlineCode",{parentName:"p"},"restful.Filter"),"."),(0,s.kt)("p",null,"Use ",(0,s.kt)("a",{parentName:"p",href:"https://pkg.go.dev/github.com/emicklei/go-restful/v3#HttpMiddlewareHandlerToFilter"},"HttpMiddlewareHandlerToFilter"),", which is introduced in ",(0,s.kt)("a",{parentName:"p",href:"https://github.com/emicklei/go-restful/tree/v3.9.0"},"v3.9.0")," by this ",(0,s.kt)("a",{parentName:"p",href:"https://github.com/emicklei/go-restful/pull/505"},"PR#505"),"."),(0,s.kt)("h2",{id:"run-demo"},"Run Demo"),(0,s.kt)(o.Z,{mdxType:"GoPlay"},(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-go",metastring:"{20,32}","{20,32}":!0},'package main\n\nimport (\n    "fmt"\n    "net/http"\n    "net/http/httptest"\n\n    restful "github.com/emicklei/go-restful/v3"\n    "github.com/ggicci/httpin"\n)\n\ntype ListUsersInput struct {\n    Gender   string `in:"query=gender"`\n    AgeRange []int  `in:"query=age_range"`\n    IsMember bool   `in:"query=is_member"`\n}\n\nfunc handleListUsers(request *restful.Request, response *restful.Response) {\n    // Retrieve you data in one line of code!\n    input := request.Request.Context().Value(httpin.Input).(*ListUsersInput)\n\n    fmt.Printf("input: %#v\\n", input)\n}\n\nfunc main() {\n    ws := new(restful.WebService)\n\n    wsContainer := restful.NewContainer()\n    wsContainer.Add(ws)\n\n    // Bind input struct with handler.\n    ws.Route(ws.GET("/users").Filter(\n        restful.HttpMiddlewareHandlerToFilter(httpin.NewInput(ListUsersInput{})),\n    ).To(handleListUsers))\n\n    r, _ := http.NewRequest("GET", "/users?gender=male&age_range=18&age_range=24&is_member=1", nil)\n\n    rw := httptest.NewRecorder()\n    wsContainer.ServeHTTP(rw, r)\n}\n'))))}m.isMDXComponent=!0}}]);